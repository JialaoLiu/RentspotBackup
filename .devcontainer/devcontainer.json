{
    "name": "Web & Database Computing - RentSpot",
    "image": "ghcr.io/uadelaide/wdc23:latest",

    // Forward ports
    "forwardPorts": [8080, 5173],
    "portsAttributes": {
        "8080": {
            "label": "Backend API",
            "onAutoForward": "notify"
        },
        "5173": {
            "label": "Frontend Dev Server",
            "onAutoForward": "openBrowser"
        }
    },

    // Configure tool-specific properties
    "customizations": {
        "vscode": {
            "extensions": [
                "html-validate.vscode-html-validate",
                "dbaeumer.vscode-eslint",
                "vsls-contrib.gitdoc",
                "ms-vsliveshare.vsliveshare-pack",
                "tonybaloney.vscode-pets",
                "unjinjang.rest-api-client",
                "Vue.volar",
                "cweijan.vscode-database-client2"
            ]
        }
    },

    // Force AMD64 architecture
    "runArgs": ["--platform=linux/amd64"],

    // Auto-setup everything after container creation
    "postCreateCommand": "bash -c 'service mysql start && sleep 5 && mysql -u root -e \"CREATE DATABASE IF NOT EXISTS Rent_database;\" && if [ -f \"/workspaces/*/backend/Rent_database_updated.sql\" ]; then mysql -u root Rent_database < /workspaces/*/backend/Rent_database_updated.sql; fi'",

    // Start database on every container restart  
    "postStartCommand": "service mysql start 2>/dev/null || service mariadb start 2>/dev/null || true",

    // Use root user (as per course requirement)
    "remoteUser": "root",

    // Default settings (keeping course requirements)
    "settings": {
        "extension-uninstaller.uninstall": [
            "github.copilot",
            "github.copilot-nightly", 
            "tabnine.tabnine-vscode",
            "timkmecl.chatgpt"
        ],
        "extensions.ignoreRecommendations": true,
        "files.autoSave": "afterDelay",
        "files.exclude": {
            "**/.*": true
        },
        "files.trimTrailingWhitespace": true,
        "files.watcherExclude": {
            "**/.git/objects/**": true,
            "**/.git/subtree-cache/**": true,
            "**/node_modules/*/**": true
        },
        "git.autofetch": true,
        "gitdoc.autoPull": "off",
        "gitdoc.commitMessageFormat": "DD, TTT",
        "gitdoc.commitValidationLevel": "none",
        "gitdoc.enabled": false,
        "gitdoc.pullOnOpen": false,
        "terminal.integrated.defaultProfile.linux": "bash"
    }
}